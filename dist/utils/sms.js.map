{"version":3,"file":"sms.js","sourceRoot":"/","sources":["utils/sms.ts"],"names":[],"mappings":";;AAAA,OAAO,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE,CAAA;AAC1B,MAAM,eAAe,GAAG,OAAO,CAAC,MAAM,CAAC,CAAA;AAEvC,SAAwB,OAAO,CAAC,KAAY,EAAC,OAAc;IACvD,IAAG;QACC,OAAO,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE,CAAC;QAC3B,MAAM,OAAO,GAAG,IAAI,eAAe,EAAE,CAAC;QAEtC,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,4CAA4C,CAAC,CAAC;QAEnE,OAAO,CAAC,gBAAgB,CAAC,cAAc,EAAE,kBAAkB,CAAC,CAAC;QAE7D,OAAO,CAAC,kBAAkB,GAAG;YACzB,IAAI,IAAI,CAAC,UAAU,KAAK,CAAC,EAAE;gBACzB,OAAO,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;gBACpC,OAAO,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,qBAAqB,EAAE,CAAC,CAAC;gBACtD,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;aACzC;QACH,CAAC,CAAC;QAEF,MAAM,IAAI,GAAG;YACX,IAAI,EAAE,SAAS;YACf,EAAE,EAAE,GAAG,KAAK,EAAE;YACd,IAAI,EAAE,GAAG;YACT,OAAO,EAAE,OAAO;YAChB,MAAM,EAAE,OAAO,CAAC,GAAG,CAAC,MAAM;YAC1B,UAAU,EAAC,OAAO,CAAC,GAAG,CAAC,UAAU;SAClC,CAAC;QAEF,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;KACxC;IAAA,OAAM,CAAC,EAAC;QACL,MAAM,CAAC,CAAA;KACV;AACL,CAAC;AA9BD,0BA8BC","sourcesContent":["require('dotenv').config()\nconst XMLHttpRequestt = require('xhr2')\n\nexport default function sendSms(phone:string,message:string){\n    try{\n        require(\"dotenv\").config();\n        const request = new XMLHttpRequestt();\n\n        request.open(\"POST\", \"https://api.wittyflow.com/v1/messages/send\");\n    \n        request.setRequestHeader(\"Content-Type\", \"application/json\");\n\n        request.onreadystatechange = function () {\n            if (this.readyState === 4) {\n              console.log(\"Status:\", this.status);\n              console.log(\"Headers:\", this.getAllResponseHeaders());\n              console.log(\"Body:\", this.responseText);\n            }\n          };\n      \n          const body = {\n            from: \"CAB_APP\",\n            to: `${phone}`,\n            type: \"1\", // <!-- use 0 for flash sms and 1 for plain sms -->\n            message: message,\n            app_id: process.env.APP_ID,\n            app_secret:process.env.APP_SECRET,\n          };\n      \n          request.send(JSON.stringify(body));\n    }catch(e){\n        throw e\n    }\n}"]}