{"version":3,"file":"query.js","sourceRoot":"/","sources":["utils/query.ts"],"names":[],"mappings":";;;AAAO,MAAM,aAAa,GAAG,CAAC,OAAa,EAAE,IAAU,EAAE,UAAgB,EAAE,MAAY,EAAE,EAAE;IACzF,MAAM,KAAK,GAAG,EAAE,CAAC;IAEjB,IAAI,OAAO,EAAE;QACX,KAAK,MAAM,GAAG,IAAI,OAAO,EAAE;YACzB,IAAI,OAAO,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE;gBAC/B,6EAA6E;gBAC7E,IAAI,OAAO,OAAO,CAAC,GAAG,CAAC,KAAK,QAAQ,IAAI,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;oBAC9E,MAAM,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC9C,MAAM,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC;oBAErC,sDAAsD;oBACtD,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,IAAI,QAAQ,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC;iBAC1C;qBAAM;oBACL,4EAA4E;oBAC5E,KAAK,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC;iBAC3B;aACF;SACF;KACF;IAED,SAAS;IACT,IAAI,MAAM,EAAE;QACV,MAAM,WAAW,GAAG,IAAI,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;QAC5C,KAAK,CAAC,KAAK,CAAC,GAAG;YACb,EAAE,IAAI,EAAE,EAAE,MAAM,EAAE,WAAW,EAAE,EAAE;YACjC,EAAE,WAAW,EAAE,EAAE,MAAM,EAAE,WAAW,EAAE,EAAE;YACxC,EAAE,QAAQ,EAAE,EAAE,MAAM,EAAE,WAAW,EAAE,EAAE;SACtC,CAAC;KACH;IAED,OAAO;IACP,IAAI,YAAY,GAAG,EAAE,CAAC;IACtB,IAAI,IAAI,EAAE;QACR,YAAY,GAAG,IAAI,CAAC;KACrB;IAED,8BAA8B;IAC9B,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,UAAU,CAAC;IACnC,KAAK,GAAG,KAAK,IAAI,EAAE,CAAE;IACrB,MAAM,GAAG,MAAM,IAAI,CAAC,CAAC;IAErB,OAAO;QACL,KAAK,EAAC,YAAY,EAAC,KAAK,EAAC,MAAM;KAChC,CAAA;AACH,CAAC,CAAC;AA7CW,QAAA,aAAa,iBA6CxB","sourcesContent":["export const generateQuery = (filters?: any, sort?: any, pagination?: any, search?: any) => {\n  const query = {};\n\n  if (filters) {\n    for (const key in filters) {\n      if (filters.hasOwnProperty(key)) {\n        // Checking if the value of the field is an object with a comparison operator\n        if (typeof filters[key] === 'object' && Object.keys(filters[key]).length === 1) {\n          const operator = Object.keys(filters[key])[0];\n          const value = filters[key][operator];\n\n          // Constructing the MongoDB query operator dynamically\n          query[key] = { [`$${operator}`]: value };\n        } else {\n          // If no comparison operator is provided, treat it as an equality comparison\n          query[key] = filters[key];\n        }\n      }\n    }\n  }\n\n  // search\n  if (search) {\n    const searchRegex = new RegExp(search, 'i');\n    query['$or'] = [\n      { name: { $regex: searchRegex } },\n      { description: { $regex: searchRegex } },\n      { location: { $regex: searchRegex } },\n    ];\n  }\n\n  // sort\n  let sortCriteria = {};\n  if (sort) {\n    sortCriteria = sort;\n  }\n\n  //apply pagination if provided\n  let { limit, offset } = pagination;\n  limit = limit || 10 ;\n  offset = offset || 0;\n\n  return {\n    query,sortCriteria,limit,offset,\n  }\n};\n\n"]}