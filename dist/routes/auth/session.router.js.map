{"version":3,"file":"session.router.js","sourceRoot":"/","sources":["routes/auth/session.router.ts"],"names":[],"mappings":";;;AAAA,8DAAqD;AACrD,uCAAyC;AAEzC,MAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAA;AAE/B,MAAM,CAAC,IAAI,CAAC,iBAAiB,EAAC,CAAO,GAAW,EAAC,GAAY,EAAE,EAAE;IAC7D,IAAG;QACC,MAAM,MAAM,GAAG,MAAM,kBAAU,CAAC,QAAQ,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;QACvF,GAAG,CAAC,MAAM,CAAC,cAAc,EAAC,MAAM,CAAC,WAAW,CAAC,CAAA;QAC7C,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAC,OAAO,EAAC,wBAAwB,EAAC,CAAC,CAAA;KAC3D;IAAA,OAAM,CAAC,EAAC;QACL,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAA;KAC/C;AAEL,CAAC,CAAA,CAAC,CAAA;AAEF,MAAM,CAAC,GAAG,CAAC,0BAA0B,EAAE,CAAO,GAAW,EAAC,GAAY,EAAE,EAAE;IACtE,IAAG;QACC,MAAM,MAAM,GAAG,MAAM,kBAAU,CAAC,QAAQ,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;QACvF,GAAG,CAAC,MAAM,CAAC,eAAe,EAAC,MAAM,CAAC,YAAY,CAAC,CAAA;QAC/C,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAC,OAAO,EAAC,wBAAwB,EAAC,CAAC,CAAA;KAC3D;IAAA,OAAM,CAAC,EAAC;QACL,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAA;KAC/C;AACL,CAAC,CAAA,CAAC,CAAA;AAEF,MAAM,CAAC,IAAI,CAAC,kBAAkB,EAAC,CAAO,GAAW,EAAC,GAAY,EAAE,EAAE;IAC9D,IAAG;QACC,MAAM,KAAK,GAAG,MAAM,kBAAU,CAAC,QAAQ,CAAC,kBAAkB,CAAC,kBAAkB,CAAC,GAAG,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAA;QAC3G,GAAG,CAAC,MAAM,CAAC,cAAc,EAAC,KAAK,CAAC,WAAW,CAAC,CAAA;QAC5C,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAC,OAAO,EAAC,wBAAwB,EAAC,CAAC,CAAA;KAC3D;IAAA,OAAM,CAAC,EAAC;QACL,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAA;KAC/C;AAEL,CAAC,CAAA,CAAC,CAAA;AAGF,kBAAe,MAAM,CAAA","sourcesContent":["import express, { Request, Response } from 'express';\nimport { appContext } from '../../start';\n\nconst router = express.Router()\n\nrouter.post('/session/create',async (req:Request,res:Response) => {\n    try{\n        const tokens = await appContext.services.UserSessionService.createUserSession(req.body)\n        res.cookie('access-token',tokens.accessToken)\n        res.status(201).json({message:'token sent as a cookie'})\n    }catch(e){\n        res.status(500).send('Error creating token')\n    }\n\n})\n\nrouter.get('/session/getrefreshtoken', async (req:Request,res:Response) => {\n    try{\n        const tokens = await appContext.services.UserSessionService.createUserSession(req.body)\n        res.cookie('refresh-token',tokens.refreshToken)\n        res.status(201).json({message:'token sent as a cookie'})\n    }catch(e){\n        res.status(500).send('Error creating token')\n    }\n})\n\nrouter.post('/session/refresh',async (req:Request,res:Response) => {\n    try{\n        const token = await appContext.services.UserSessionService.refreshAccessToken(req.cookies['refresh-token'])\n        res.cookie('access-token',token.accessToken)\n        res.status(201).json({message:'tokens sent as cookies'})\n    }catch(e){\n        res.status(500).send('Error creating token')\n    }\n\n})\n\n\nexport default router"]}